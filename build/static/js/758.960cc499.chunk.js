"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[758],{1758:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var i=n(885),o=n(4942),r=n(2791),a=n(2878),l=n(9504),d=n(890),s=n(2455),c=n(6089);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=(0,i.Z)(t,2),o=n[0],a=n[1];return(0,r.useLayoutEffect)((function(){if(o){var e=document.body.style.overflow,t=document.body.style.paddingRight;document.body.style.overflow="hidden";var n=document.getElementById("root"),i=n?n.offsetWidth-n.scrollWidth:0;return i&&(document.body.style.paddingRight="".concat(i,"px")),function(){document.body.style.overflow=e,i&&(document.body.style.paddingRight=t)}}}),[o]),(0,r.useEffect)((function(){o!==e&&a(e)}),[e]),[o,a]},f=n(4957),g=n(3400),h=n(690),p=n(4361),m=n(4319),v=n(184),x=function(e){var t=e.date,n=e.toggleFullscreen,i=e.mediaType,o=(0,c.rv)(t).mutate,r=(0,c.zy)(t);if(!r.data)return null;var a=r.data.votes;return(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,v.jsxs)("div",{style:{display:"flex",margin:"0 1rem"},children:[(0,v.jsx)(f.Z,{icon:(0,v.jsx)(h.Z,{}),checkedIcon:(0,v.jsx)(p.Z,{color:"error"}),onChange:function(){return o()},inputProps:{"aria-label":"Like checkbox"},checked:r.data.userLiked,style:{padding:"0 5%"}}),(0,v.jsx)("p",{"aria-label":"Vote count",style:{margin:"0 5%"},children:a})]}),"image"===i&&(0,v.jsx)(g.Z,{onClick:n,"aria-label":"Toggle Fullscreen",style:{padding:"0 5%"},children:(0,v.jsx)(m.Z,{})})]})},y=n(1413),j=n(4139);var b=function(e,t,n){var i=(0,r.useRef)();(0,r.useEffect)((function(){var o=(null===n||void 0===n?void 0:n.current)||window;if(o&&o.addEventListener){i.current!==t&&(i.current=t);var r=function(e){null!==i&&void 0!==i&&i.current&&i.current(e)};return o.addEventListener(e,r),function(){o.removeEventListener(e,r)}}}),[e,n,t])};var Z=function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],o=t[1],a=(0,r.useState)({width:0,height:0}),l=(0,i.Z)(a,2),d=l[0],s=l[1],c=(0,r.useCallback)((function(){s({width:(null===n||void 0===n?void 0:n.offsetWidth)||0,height:(null===n||void 0===n?void 0:n.offsetHeight)||0})}),[null===n||void 0===n?void 0:n.offsetHeight,null===n||void 0===n?void 0:n.offsetWidth]);return b("resize",c),(0,r.useLayoutEffect)((function(){c()}),[null===n||void 0===n?void 0:n.offsetHeight,null===n||void 0===n?void 0:n.offsetWidth]),[o,d]},w=n(6759),k=(0,s.Z)((function(e){return{toggleButton:{border:"none",backgroundColor:"inherit",cursor:"pointer",display:"inline-block",color:"dark"===e.palette.mode?"#AAA":"#000",padding:0,fontSize:"1.1rem","&:hover":{color:e.palette.success.light}}}})),C=function(e){var t=e.text,n=(0,r.useState)(!1),o=(0,i.Z)(n,2),a=o[0],l=o[1],s=Z(),c=(0,i.Z)(s,2),u=c[0],f=c[1].height,g=k(),h=(0,j.useSpring)({config:(0,y.Z)({},j.config.slow),from:{opacity:0,height:0},to:{opacity:a?1:0,height:a?f:0}});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(j.animated.div,{style:(0,y.Z)((0,y.Z)({},h),{},{overflow:"hidden"}),children:(0,v.jsx)(d.Z,{variant:"body2",component:"p",ref:u,style:{textIndent:"30px",textAlign:"justify"},children:t})}),(0,v.jsxs)("button",{onClick:function(e){e.preventDefault(),l((function(e){return!e}))},className:g.toggleButton,"aria-label":"toggle description",children:[a?"Hide description":"Read description",(0,v.jsx)(w.Z,{style:{transform:a?"":"rotate(180deg)",transition:"transform 900ms ease"}})]})]})},F=n(2169),E=n(9823),S=(0,s.Z)({imageContainer:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",textAlign:"center",marginBottom:"1rem"},image:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"},imageModal:{width:"100%",maxHeight:"95vh",maxWidth:"95vw"},overlay:{display:"flex",flexDirection:"column",alignItems:"center",position:"fixed",width:"100vw",height:"100vh",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 5, 0.9)",zIndex:99,cursor:"pointer",paddingTop:"1%",overflow:"scroll"},overlayButton:{position:"absolute",right:0,margin:"1rem 1rem"}}),T=function(e){var t=e.url,n=e.title,i=e.mediaType,o=e.toggleFullscreen,r=e.isExpanded,a=e.description,l=e.copyright,s=e.date,c=S();return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:c.imageContainer,children:[(0,v.jsx)(F.Z,{className:c.image,component:"image"===i?"img":"iframe",alt:n,src:t,title:"image"===i?"Image of ".concat(n):"Video of ".concat(n),allowFullScreen:!0,loading:"lazy"}),r&&(0,v.jsxs)("div",{className:c.overlay,children:[(0,v.jsx)(g.Z,{onClick:o,component:"span",style:{alignSelf:"flex-end",opacity:.8},children:(0,v.jsx)(E.Z,{})}),(0,v.jsx)("div",{className:c.imageContainer,children:(0,v.jsx)("img",{src:t,alt:n,className:c.imageModal})}),(0,v.jsxs)("div",{style:{padding:"1% 2%"},children:[(0,v.jsx)(d.Z,{variant:"subtitle1",style:{textIndent:"30px",textAlign:"justify",color:"#FFF",fontSize:".85rem"},children:a}),(0,v.jsxs)("p",{style:{color:"#FFF",fontSize:".75rem",paddingTop:"1.5 rem"},children:["Photo taken ",s,l&&(0,v.jsxs)("span",{children:[" by ",l]})]})]})]})]})})},I=(0,s.Z)((function(e){return{postCard:(0,o.Z)({maxWidth:"60vw"},e.breakpoints.down("md"),{maxWidth:"95vw"}),contentTopContainer:{display:"flex",justifyContent:"space-between"}}})),N=function(e){var t=e.date,n=I(),o=(0,r.useState)(!1),s=(0,i.Z)(o,2),f=s[0],g=s[1],h=u(!1),p=(0,i.Z)(h,2),m=p[0],y=p[1],j=(0,c.wE)(t),b=function(e){e.preventDefault(),g((function(e){return!e})),y(!m)};if(!j.data)return null;var Z=j.data;return(0,v.jsxs)(a.Z,{className:n.postCard,children:[(0,v.jsx)(T,{url:Z.url,title:Z.title,mediaType:Z.media_type,toggleFullscreen:b,isExpanded:f,description:Z.explanation,copyright:null===Z||void 0===Z?void 0:Z.copyright,date:Z.date}),(0,v.jsxs)(l.Z,{children:[(0,v.jsxs)("div",{className:n.contentTopContainer,children:[(0,v.jsx)(d.Z,{variant:"h5",component:"h5",children:Z.title}),(0,v.jsx)(x,{date:t,toggleFullscreen:b,mediaType:Z.media_type})]}),(0,v.jsx)(d.Z,{variant:"subtitle1",component:"h6",children:Z.date}),(0,v.jsx)(C,{text:Z.explanation})]})]})}}}]);
//# sourceMappingURL=758.960cc499.chunk.js.map