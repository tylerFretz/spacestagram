"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[758],{1758:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i=n(885),o=n(4942),r=n(2791),l=n(2878),a=n(9504),d=n(890),s=n(2455),c=n(6089);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=(0,i.Z)(t,2),o=n[0],l=n[1];return(0,r.useLayoutEffect)((function(){if(o){var e=document.body.style.overflow,t=document.body.style.paddingRight;document.body.style.overflow="hidden";var n=document.getElementById("root"),i=n?n.offsetWidth-n.scrollWidth:0;return i&&(document.body.style.paddingRight="".concat(i,"px")),function(){document.body.style.overflow=e,i&&(document.body.style.paddingRight=t)}}}),[o]),(0,r.useEffect)((function(){o!==e&&l(e)}),[e]),[o,l]},f=n(4957),h=n(3400),g=n(690),p=n(4361),v=n(4319),m=n(184),x=function(e){var t=e.date,n=e.toggleFullscreen,i=e.mediaType,o=(0,c.rv)(t).mutate,r=(0,c.zy)(t);if(!r.data)return null;var l=r.data.votes;return(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,m.jsxs)("div",{style:{display:"flex",margin:"0 1rem"},children:[(0,m.jsx)(f.Z,{icon:(0,m.jsx)(g.Z,{}),checkedIcon:(0,m.jsx)(p.Z,{color:"error"}),onChange:function(){return o()},inputProps:{"aria-label":"Like checkbox"},checked:r.data.userLiked,style:{padding:"0 5%"}}),(0,m.jsx)("p",{"aria-label":"Vote count",style:{margin:"0 5%"},children:l})]}),"image"===i&&(0,m.jsx)(h.Z,{onClick:n,"aria-label":"Toggle Fullscreen",style:{padding:"0 5%"},children:(0,m.jsx)(v.Z,{})})]})},y=n(1413),j=n(4139);var b=function(e,t,n){var i=(0,r.useRef)();(0,r.useEffect)((function(){var o=(null===n||void 0===n?void 0:n.current)||window;if(o&&o.addEventListener){i.current!==t&&(i.current=t);var r=function(e){null!==i&&void 0!==i&&i.current&&i.current(e)};return o.addEventListener(e,r),function(){o.removeEventListener(e,r)}}}),[e,n,t])};var Z=function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],o=t[1],l=(0,r.useState)({width:0,height:0}),a=(0,i.Z)(l,2),d=a[0],s=a[1],c=(0,r.useCallback)((function(){s({width:(null===n||void 0===n?void 0:n.offsetWidth)||0,height:(null===n||void 0===n?void 0:n.offsetHeight)||0})}),[null===n||void 0===n?void 0:n.offsetHeight,null===n||void 0===n?void 0:n.offsetWidth]);return b("resize",c),(0,r.useLayoutEffect)((function(){c()}),[null===n||void 0===n?void 0:n.offsetHeight,null===n||void 0===n?void 0:n.offsetWidth]),[o,d]},w=n(6759),F=(0,s.Z)((function(e){return{toggleButton:{border:"none",backgroundColor:"inherit",cursor:"pointer",display:"inline-block",color:"dark"===e.palette.mode?"#AAA":"#000",padding:0,fontSize:"1.1rem","&:hover":{color:e.palette.success.light}}}})),k=function(e){var t=e.text,n=(0,r.useState)(!1),o=(0,i.Z)(n,2),l=o[0],a=o[1],s=Z(),c=(0,i.Z)(s,2),u=c[0],f=c[1].height,h=F(),g=(0,j.useSpring)({config:(0,y.Z)({},j.config.slow),from:{opacity:0,height:0},to:{opacity:l?1:0,height:l?f:0}});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j.animated.div,{style:(0,y.Z)((0,y.Z)({},g),{},{overflow:"hidden"}),children:(0,m.jsx)(d.Z,{variant:"body2",component:"p",ref:u,style:{textIndent:"30px",textAlign:"justify"},children:t})}),(0,m.jsxs)("button",{onClick:function(e){e.preventDefault(),a((function(e){return!e}))},className:h.toggleButton,"aria-label":"toggle description",children:[l?"Hide description":"Read description",(0,m.jsx)(w.Z,{style:{transform:l?"":"rotate(180deg)",transition:"transform 900ms ease"}})]})]})},C=n(2169),S=n(9823),E=(0,s.Z)({imageContainer:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",textAlign:"center"},image:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"},imageModal:{width:"100%",maxHeight:"95vh",maxWidth:"95vw"},overlay:{display:"flex",flexDirection:"column",alignItems:"center",position:"fixed",width:"100vw",height:"100vh",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 5, 0.95)",zIndex:99,cursor:"pointer",paddingTop:"1%",overflow:"scroll"}}),T=function(e){var t=e.url,n=e.title,i=e.mediaType,o=e.description,r=e.copyright,l=e.date,a=e.toggleFullscreen,s=e.isExpanded,c=E();return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:c.imageContainer,children:[(0,m.jsx)(C.Z,{className:c.image,component:"image"===i?"img":"iframe",alt:n,src:t,title:"image"===i?"Image of ".concat(n):"Video of ".concat(n),allowFullScreen:!0,loading:"lazy"}),s&&(0,m.jsxs)("div",{className:c.overlay,children:[(0,m.jsx)(h.Z,{onClick:a,component:"span",role:"button",style:{alignSelf:"flex-end",opacity:.8,color:"#FFF"},children:(0,m.jsx)(S.Z,{})}),(0,m.jsx)("div",{children:(0,m.jsx)("img",{src:t,alt:n,className:c.imageModal})}),(0,m.jsxs)("div",{style:{padding:"1% 2%"},children:[(0,m.jsx)(d.Z,{variant:"subtitle1",style:{textIndent:"30px",textAlign:"justify",color:"#FFF",fontSize:".85rem"},children:o}),(0,m.jsxs)("p",{style:{color:"#FFF",fontSize:".75rem",paddingTop:"1.5 rem",marginBottom:0},children:["Photo taken ",l]}),r&&(0,m.jsxs)("p",{style:{color:"#FFF",fontSize:".75rem",marginTop:0},children:[" by ",r]})]})]})]})})},z=(0,s.Z)((function(e){return{postCard:(0,o.Z)({maxWidth:"60vw"},e.breakpoints.down("md"),{maxWidth:"95vw"}),contentTopContainer:{display:"flex",justifyContent:"space-between"}}})),I=function(e){var t=e.date,n=z(),o=(0,r.useState)(!1),s=(0,i.Z)(o,2),f=s[0],h=s[1],g=u(!1),p=(0,i.Z)(g,2),v=p[0],y=p[1],j=(0,c.wE)(t),b=function(e){e.preventDefault(),h((function(e){return!e})),y(!v)};if(!j.data)return null;var Z=j.data;return(0,m.jsxs)(l.Z,{className:n.postCard,children:[(0,m.jsx)(T,{url:Z.url,title:Z.title,mediaType:Z.media_type,description:Z.explanation,copyright:null===Z||void 0===Z?void 0:Z.copyright,date:Z.date,toggleFullscreen:b,isExpanded:f}),(0,m.jsxs)(a.Z,{children:[(0,m.jsxs)("div",{className:n.contentTopContainer,children:[(0,m.jsx)(d.Z,{variant:"h5",component:"h5",children:Z.title}),(0,m.jsx)(x,{date:t,toggleFullscreen:b,mediaType:Z.media_type})]}),(0,m.jsx)(d.Z,{variant:"subtitle1",component:"h6",children:Z.date}),(0,m.jsx)(k,{text:Z.explanation})]})]})}}}]);
//# sourceMappingURL=758.c85c1ae8.chunk.js.map